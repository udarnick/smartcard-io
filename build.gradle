plugins {
	id 'java-library'
}
repositories {
	jcenter()
	flatDir {
		dirs 'lib'
	}
}

apply plugin: 'maven-publish'

sourceSets.main.java.srcDirs = ['src']
sourceSets.main.resources.srcDirs = ['nls', 'src']

dependencies {
	api name: 'is-native-c'
	api name: 'is-runtime'
	runtimeOnly 'net.java.dev.jna:jna:3.5.2'
}

if(JavaVersion.current() > JavaVersion.VERSION_1_9) {
	dependencies {
		implementation 'javax.annotation:javax.annotation-api:1.3.2'
	}
}

publishing {

  repositories {
    maven {
      name = "GitHubPackages"
      url = "https://maven.pkg.github.com/udarnick/smartcard-io"
      credentials {
                username = project.findProperty("gpr.user") ?: System.getenv("USERNAME")
                password = project.findProperty("gpr.key") ?: System.getenv("TOKEN")
      }
    }
  }
      publications {
        gpr(MavenPublication) {
            from(components.java)
        }
    }
}
